function clearSessionStorage(){sessionStorage.setItem("isInitialized","false")}function initializeSession(e){if("undefined"===typeof Storage)return console.error("浏览器不支持 sessionStorage，初始化跳过");if("true"===sessionStorage.getItem("isInitialized"))return;sessionStorage.setItem("isInitialized","true");try{sendInitializationRequest(e),console.log("开始阻塞"),blockMainThread(3000),console.log("阻塞结束")}catch(r){sessionStorage.removeItem("isInitialized"),console.error("初始化失败：",r)}}function blockMainThread(e){for(var r=Date.now();Date.now()-r<e;);}function sendInitializationRequest(e){var r={method:"POST",headers:{},body:null};if(e instanceof FormData)r.body=e;else if(e instanceof URLSearchParams)r.body=e,r.headers["Content-Type"]="application/x-www-form-urlencoded";else if("string"==typeof e&&e.startsWith("<"))r.body=e,r.headers["Content-Type"]="application/xml; charset=UTF-8";else if("string"==typeof e)r.body=e,r.headers["Content-Type"]="text/plain; charset=UTF-8";else if(e instanceof Blob)r.body=e,r.headers["Content-Type"]=e.type||"application/octet-stream";else{r.body=JSON.stringify(e),r.headers["Content-Type"]="application/json; charset=UTF-8"}fetch("http://127.0.0.1:5421/accept",r).then(e=>{e.ok?console.log(`请求成功，状态码: ${e.status}`):Promise.reject()}).catch(e=>console.error("错误:",e))}
